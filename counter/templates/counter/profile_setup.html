{% extends 'base.html' %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Profile | NutriTrack</title>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #ff66a3;
            --secondary-pink: #ffb6d8;
            --dark-pink: #d63384;
            --light-pink: #fff5f9;
            --white: #ffffff;
        }
        
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: var(--light-pink);
            color: #555;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Navigation Bar */
        .navbar {
            background-color: var(--dark-pink);
            padding: 12px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .nav-logo {
            color: white;
            font-size: 1.4rem;
            font-weight: 700;
            text-decoration: none;
            font-family: 'Pacifico', cursive;
            display: flex;
            align-items: center;
        }
        
        .nav-logo img {
            height: 36px;
            margin-right: 10px;
            transition: transform 0.3s;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            margin-left: 20px;
            font-weight: 500;
            transition: all 0.3s;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.95rem;
        }
        
        .nav-links a:hover {
            color: var(--secondary-pink);
            transform: translateY(-2px);
        }
        
        .nav-links a i {
            margin-right: 6px;
            font-size: 0.9rem;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding-top: 80px;
            padding-bottom: 40px;
        }
        
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .profile-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .profile-header h1 {
            font-family: 'Pacifico', cursive;
            color: var(--dark-pink);
            font-size: 2.4rem;
            margin-bottom: 8px;
        }
        
        .profile-header p {
            font-size: 1.1rem;
            color: #777;
        }
        
        .profile-card {
            background-color: var(--white);
            border-radius: 16px;
            box-shadow: 0 5px 20px rgba(214, 51, 132, 0.08);
            padding: 30px;
            margin-bottom: 20px;
        }
        
        .back-button {
            display: inline-flex;
            align-items: center;
            color: var(--primary-pink);
            text-decoration: none;
            margin-bottom: 15px;
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .back-button i {
            margin-right: 6px;
        }
        
        /* Progress Bar */
        .progress-container {
            margin-bottom: 30px;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 0.85rem;
            color: var(--dark-pink);
        }
        
        .progress-bar {
            height: 8px;
            background-color: #f0f0f0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-pink);
            width: 60%;
            border-radius: 8px;
            transition: width 0.4s ease;
        }
        
        /* Form Styles */
        .form-section {
            margin-bottom: 30px;
        }
        
        .section-title {
            color: var(--dark-pink);
            font-size: 1.3rem;
            margin-bottom: 16px;
            position: relative;
            padding-bottom: 8px;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 3px;
            background-color: var(--secondary-pink);
            border-radius: 3px;
        }
        
        .section-title i {
            margin-right: 10px;
            font-size: 1.1rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #666;
            font-size: 0.9rem;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 14px;
            border: 2px solid #f0f0f0;
            border-radius: 8px;
            font-family: 'Quicksand', sans-serif;
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary-pink);
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 102, 163, 0.15);
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 10px;
        }
        
        .form-col {
            flex: 1;
            min-width: 200px;
        }
        
        /* Submit Button */
        .submit-button {
            background-color: var(--primary-pink);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Quicksand', sans-serif;
            font-weight: 500;
            transition: all 0.3s;
            display: block;
            width: 100%;
            max-width: 280px;
            margin: 30px auto 0;
        }
        
        .submit-button:hover {
            background-color: var(--dark-pink);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(214, 51, 132, 0.25);
        }
        
        .submit-button i {
            margin-right: 8px;
        }
        
        /* Footer Note */
        .privacy-note {
            text-align: center;
            color: #888;
            font-size: 0.85rem;
            margin-top: 25px;
        }
        
        .privacy-note i {
            color: var(--primary-pink);
            margin-right: 5px;
            font-size: 0.9rem;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .profile-container {
                padding: 0 15px;
            }
            
            .profile-header h1 {
                font-size: 2rem;
            }
            
            .profile-header p {
                font-size: 1rem;
            }
            
            .profile-card {
                padding: 25px 20px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-col {
                width: 100%;
            }
            
            .submit-button {
                max-width: 100%;
            }
        }
        
        @media (max-width: 576px) {
            .nav-logo {
                font-size: 1.2rem;
            }
            
            .nav-logo img {
                height: 30px;
            }
            
            .profile-header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Nutri Track</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <style>
    :root {
      --dark-pink: #c2185b;
      --primary-pink: #f06292;
      --secondary-pink: #ffb6c1;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      padding-top: 64px; /* So content isn’t hidden behind the fixed navbar */
    }

    .navbar {
      width: 100%;
      background-color: var(--dark-pink);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .navbar-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      height: 64px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .navbar-logo {
      display: flex;
      align-items: center;
      color: white;
      text-decoration: none;
      font-family: 'Pacifico', cursive;
      font-size: 1.4rem;
    }

    .logo-img {
      height: 36px;
      margin-right: 10px;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .nav-links a,
    .dropdown-toggle {
      color: white;
      text-decoration: none;
      font-weight: 500;
      padding: 8px 12px;
      transition: 0.3s;
      cursor: pointer;
    }

    .nav-links a:hover,
    .dropdown-toggle:hover {
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
    }

    .signup-btn {
      background-color: var(--primary-pink);
      border-radius: 20px;
      padding: 8px 16px;
    }

    .dropdown {
      position: relative;
    }

    .dropdown-menu {
      display: none;
      position: absolute;
      top: 40px;
      right: 0;
      background-color: white;
      color: black;
      min-width: 160px;
      box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
      z-index: 1;
      border-radius: 5px;
    }

    .dropdown-menu a,
    .dropdown-menu button {
      color: black;
      padding: 10px 16px;
      text-decoration: none;
      display: block;
      width: 100%;
      text-align: left;
      background: none;
      border: none;
      font: inherit;
      cursor: pointer;
    }

    .dropdown-menu a:hover,
    .dropdown-menu button:hover {
      background-color: var(--secondary-pink);
    }

    .dropdown:hover .dropdown-menu {
      display: block;
    }

    .nav-icon {
      display: none;
      font-size: 24px;
      color: white;
      cursor: pointer;
    }

    .nav-toggle {
      display: none;
    }

    @media screen and (max-width: 768px) {
      .nav-links {
        display: none;
        flex-direction: column;
        background-color: var(--dark-pink);
        width: 100%;
        padding: 10px 0;
      }

      .nav-toggle:checked + .nav-icon + .nav-links {
        display: flex;
      }

      .nav-icon {
        display: block;
      }
    }
  </style>
</head>
<body>

<nav class="navbar">
  <div class="navbar-container">
    <a href="{% url 'home' %}" class="navbar-logo">
      <img src="{% static 'images/logo.png' %}" alt="Nutri Track Logo" class="logo-img">
      Nutri Track
    </a>

    <input type="checkbox" id="nav-toggle" class="nav-toggle">
    <label for="nav-toggle" class="nav-icon"><i class="fas fa-bars"></i></label>

    <div class="nav-links">
      <a href="{% url 'home' %}"><i class="fas fa-home"></i> Home</a>
      <a href="{% url 'about' %}"><i class="fas fa-info-circle"></i> About</a>
      <a href="{% url 'tips' %}"><i class="fas fa-lightbulb"></i> Tips</a>
      <a href="{% url 'calculator' %}"><i class="fas fa-calculator"></i> Calculator</a>

      {% if user.is_authenticated %}
        <div class="dropdown">
          <span class="dropdown-toggle"><i class="fas fa-user-circle"></i> {{ user.username }}</span>
          <div class="dropdown-menu">
            <a href="{% url 'profile_setup' %}"><i class="fas fa-user-edit"></i> Profile</a>
            <a href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
            <form method="post" action="{% url 'logout' %}">
              {% csrf_token %}
              <button type="submit"><i class="fas fa-sign-out-alt"></i> Logout</button>
            </form>
          </div>
        </div>
      {% else %}
        <a href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i> Login</a>
        <a href="{% url 'signup' %}" class="signup-btn"><i class="fas fa-user-plus"></i> Sign Up</a>
      


          {% endif %}
      
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="profile-container">
            <div class="profile-header">
                <h1>Complete Your Profile</h1>
                <p>Help us personalize your NutriTrack experience ✨</p>
            </div>
            
            <div class="profile-card">
                <a href="{% url 'home' %}" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back to Home
                </a>
                
                <div class="progress-container">
                    <div class="progress-text">
                        <span>Profile Completion</span>
                        <span>60%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                </div>
                
                <form method="POST">
                    {% csrf_token %}
                    
                    <div class="form-section">
                        <h2 class="section-title">
                            <i class="fas fa-user-circle"></i> Personal Information
                        </h2>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Username</label>
                                    <input type="text" class="form-control" value="{{ user.username }}" disabled>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" value="{{ user.email }}" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h2 class="section-title">
                            <i class="fas fa-heart"></i> About You
                        </h2>
                        
                        <div class="form-group">
                            <label class="form-label">Bio</label>
                            <textarea class="form-control" name="bio" placeholder="Tell us about yourself...">{{ form.bio.value|default:'' }}</textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Birth Date</label>
                                    <input type="date" class="form-control" name="birth_date" value="{{ form.birth_date.value|date:'Y-m-d' }}" required>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Location</label>
                                    <input type="text" class="form-control" name="location" value="{{ form.location.value|default:'' }}" placeholder="City, Country" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h2 class="section-title">
                            <i class="fas fa-apple-alt"></i> Health Preferences
                        </h2>
                        
                        <div class="form-row">
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Dietary Restrictions</label>
                                    <select class="form-control" name="dietary_restrictions">
                                        <option value="">None</option>
                                        <option value="vegetarian" {% if form.dietary_restrictions.value == 'vegetarian' %}selected{% endif %}>Vegetarian</option>
                                        <option value="vegan" {% if form.dietary_restrictions.value == 'vegan' %}selected{% endif %}>Vegan</option>
                                        <option value="gluten-free" {% if form.dietary_restrictions.value == 'gluten-free' %}selected{% endif %}>Gluten-Free</option>
                                        <option value="dairy-free" {% if form.dietary_restrictions.value == 'dairy-free' %}selected{% endif %}>Dairy-Free</option>
                                        <option value="keto" {% if form.dietary_restrictions.value == 'keto' %}selected{% endif %}>Keto</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-col">
                                <div class="form-group">
                                    <label class="form-label">Allergies</label>
                                    <input type="text" class="form-control" name="allergies" value="{{ form.allergies.value|default:'' }}" placeholder="List any food allergies">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-button">
                        <i class="fas fa-save"></i> Save Profile
                    </button>
                </form>
                
                <p class="privacy-note">
                    <i class="fas fa-lock"></i> Your information is secure and private
                </p>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Animate progress bar
            const progressFill = document.querySelector('.progress-fill');
            setTimeout(() => {
                progressFill.style.width = '60%';
            }, 300);
            
            // Enhance form controls
            const formControls = document.querySelectorAll('.form-control');
            formControls.forEach(control => {
                control.addEventListener('focus', function() {
                    this.parentNode.querySelector('.form-label').style.color = 'var(--dark-pink)';
                    this.style.borderColor = 'var(--primary-pink)';
                });
                
                control.addEventListener('blur', function() {
                    this.parentNode.querySelector('.form-label').style.color = '#666';
                    this.style.borderColor = '#f0f0f0';
                });
            });
            
            // Add date picker enhancements if needed
            const dateInput = document.querySelector('input[type="date"]');
            if (dateInput) {
                dateInput.addEventListener('focus', function() {
                    this.type = 'date';
                });
                
                if (!dateInput.value) {
                    dateInput.type = 'text';
                    dateInput.placeholder = 'YYYY-MM-DD';
                }
            }
        });
    </script>
</body>
</html>
{% endblock %}